(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{16:function(e,t,n){e.exports={TaskEditor:"ContactsForm_TaskEditor__2VeED",TaskEditor_label:"ContactsForm_TaskEditor_label__17ZZj",TaskEditor_input:"ContactsForm_TaskEditor_input__vn7L0",TaskEditorinput:"ContactsForm_TaskEditorinput__1K7lu",TaskEditor_button:"ContactsForm_TaskEditor_button__Gs4c6"}},24:function(e,t,n){e.exports={TaskList:"ContactList_TaskList__1vssD",TaskList_item:"ContactList_TaskList_item__2eNkl",TaskList_button:"ContactList_TaskList_button__1TfR2"}},38:function(e,t,n){e.exports={containerApp:"Container_containerApp__2QKgb"}},39:function(e,t,n){e.exports={TaskEditor_input:"Filter_TaskEditor_input__1ids8"}},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),i=n.n(c),s=n(13),u=n(3),o=n(36),l=n(23),b=n(4),j=n(15),d=n(37),p=n.n(d),f=n(5),h=n(6),O=Object(b.b)("contact/filter"),m=n(9),x=n.n(m),v=n(14),k=n(12),g=n.n(k);g.a.defaults.baseURL="https://6196b1abaf46280017e7e242.mockapi.io/";var y,_,w=Object(b.c)("contact/fetchContacts",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,g.a.get("/contacts ");case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),C=Object(b.c)("contact/addContact",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,g.a.post("/contacts",t);case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(b.c)("contact/deleteContact",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,g.a.delete("/contacts/".concat(t));case 4:return a=e.sent,c=a.data.id,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(b.d)([{id:"id-1",name:"Rosie Simpson",number:"459-12-56"},{id:"id-2",name:"Hermione Kline",number:"443-89-12"},{id:"id-3",name:"Eden Clements",number:"645-17-79"},{id:"id-4",name:"Annie Copeland",number:"227-91-26"}],(y={},Object(f.a)(y,w.fulfilled,(function(e,t){return t.payload})),Object(f.a)(y,C.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(l.a)(e),[n])})),Object(f.a)(y,A.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),y)),E=Object(b.d)(!1,(_={},Object(f.a)(_,w.pending,(function(){return!0})),Object(f.a)(_,w.fulfilled,(function(){return!1})),Object(f.a)(_,w.rejected,(function(){return!1})),Object(f.a)(_,C.pending,(function(){return!0})),Object(f.a)(_,C.fulfilled,(function(){return!1})),Object(f.a)(_,C.rejected,(function(){return!1})),Object(f.a)(_,A.pending,(function(){return!0})),Object(f.a)(_,A.fulfilled,(function(){return!1})),Object(f.a)(_,A.rejected,(function(){return!1})),_)),L=Object(b.d)("",Object(f.a)({},O,(function(e,t){return t.payload}))),F=Object(b.d)(null,{}),S=Object(h.b)({items:T,filter:L,loading:E,error:F});g.a.defaults.baseURL="https://connections-api.herokuapp.com";var N,W=function(e){g.a.defaults.headers.common.Authorization="Bearer ".concat(e)},D=function(){g.a.defaults.headers.common.Authorization=""},R=Object(b.c)("auth/register",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,g.a.post("/users/signup",t);case 4:return a=e.sent,c=a.data,W(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(b.c)("auth/login",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,g.a.post("/users/login",t);case 4:return a=e.sent,c=a.data,W(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),V=Object(b.c)("auth/logout",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,g.a.post("/users/logout");case 4:D(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),z=Object(b.c)("auth/refresh",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var r,a,c,i,s,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.getState,c=a(),i=c.auth.token){e.next=5;break}return e.abrupt("return",r());case 5:return W(i),e.prev=7,e.next=10,g.a.get("/users/current");case 10:return s=e.sent,u=s.data,e.abrupt("return",u);case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",r(e.t0));case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n){return e.apply(this,arguments)}}()),U=Object(b.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isAuth:!1,isFetchingCurrentUser:!1},extraReducers:(N={},Object(f.a)(N,R.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isAuth=!0})),Object(f.a)(N,B.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isAuth=!0})),Object(f.a)(N,V.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isAuth=!1})),Object(f.a)(N,z.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(f.a)(N,z.fulfilled,(function(e,t){e.user=t.payload,e.isAuth=!0,e.isFetchingCurrentUser=!1})),Object(f.a)(N,z.rejected,(function(e){e.isFetchingCurrentUser=!1})),N)}).reducer,Z={key:"auth",storage:p.a,whitelist:["token"]},M=Object(b.a)({reducer:{auth:Object(j.g)(Z,U),contacts:S},middleware:Object(l.a)(Object(b.f)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),devTools:!1}),P=Object(j.h)(M),H=(n(71),n(2)),I=function(e){return e.auth.user.name},J=function(e){return e.auth.isAuth},K=function(e){return e.auth.isFetchingCurrentUser},q=n(1),G={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5"}},Q=function(){var e=Object(u.c)(J);return Object(q.jsxs)("nav",{children:[Object(q.jsx)(s.b,{to:"/",style:G.link,activestyle:G.activeLink,children:"Home"}),e&&Object(q.jsx)(s.b,{to:"/phonebook",style:G.link,activestyle:G.activeLink,children:"Phonebook"})]})},$={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function X(){var e=Object(u.b)(),t=Object(u.c)(I);return Object(q.jsxs)("div",{style:$.container,children:[Object(q.jsxs)("span",{style:$.name,children:["Welcome, ",t]}),Object(q.jsx)("button",{type:"button",onClick:function(){return e(V())},children:"Exit"})]})}var Y={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function ee(){return Object(q.jsxs)("div",{children:[Object(q.jsx)(s.b,{to:"/register",style:Y.link,activestyle:Y.activeLink,children:"Register"}),Object(q.jsx)(s.b,{to:"/login",style:Y.link,activestyle:Y.activeLink,children:"Login"})]})}var te={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function ne(){var e=Object(u.c)(J);return Object(q.jsxs)("header",{style:te.header,children:[Object(q.jsx)(Q,{}),e?Object(q.jsx)(X,{}):Object(q.jsx)(ee,{})]})}var re=n(38),ae=n.n(re);function ce(e){var t=e.children;return Object(q.jsx)("div",{className:ae.a.containerApp,children:t})}function ie(){return Object(q.jsx)("h1",{children:"Home page!!!"})}var se=n(7),ue={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function oe(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(se.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),s=Object(se.a)(i,2),o=s[0],l=s[1],b=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"email":return c(r);case"password":return l(r);default:return}};return Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{children:"Login page"}),Object(q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(B({email:a,password:o})),c(""),l("")},style:ue.form,autoComplete:"off",children:[Object(q.jsxs)("label",{style:ue.label,children:["Mail",Object(q.jsx)("input",{type:"email",name:"email",value:a,onChange:b})]}),Object(q.jsxs)("label",{style:ue.label,children:["Password",Object(q.jsx)("input",{type:"password",name:"password",value:o,onChange:b})]}),Object(q.jsx)("button",{type:"submit",children:"Enter"})]})]})}var le={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function be(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(se.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),s=Object(se.a)(i,2),o=s[0],l=s[1],b=Object(r.useState)(""),j=Object(se.a)(b,2),d=j[0],p=j[1],f=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":return c(r);case"email":return l(r);case"password":return p(r);default:return}};return Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{children:"Registration page"}),Object(q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(R({name:a,email:o,password:d})),c(""),l(""),p("")},style:le.form,autoComplete:"off",children:[Object(q.jsxs)("label",{style:le.label,children:["Name",Object(q.jsx)("input",{type:"text",name:"name",value:a,onChange:f})]}),Object(q.jsxs)("label",{style:le.label,children:["Mail",Object(q.jsx)("input",{type:"email",name:"email",value:o,onChange:f})]}),Object(q.jsxs)("label",{style:le.label,children:["Password",Object(q.jsx)("input",{type:"password",name:"password",value:d,onChange:f})]}),Object(q.jsx)("button",{type:"submit",children:"Register now"})]})]})}var je=n(22),de=function(e){return e.contacts.loading},pe=function(e){return e.contacts.filter},fe=Object(je.a)([function(e){return e.contacts.items},pe],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),he=n(24),Oe=n.n(he);function me(){var e=Object(u.c)(fe),t=Object(u.b)();return Object(q.jsx)("ul",{className:Oe.a.TaskList,children:e.map((function(e){var n=e.id,r=e.name,a=e.number;return Object(q.jsxs)("li",{className:Oe.a.TaskList_item,children:[r," : ",a,Object(q.jsx)("button",{className:Oe.a.TaskList_button,onClick:function(){return t(A.fulfilled(n))},children:"Delete"})]},n)}))})}var xe=n(75),ve=n(16),ke=n.n(ve);function ge(){var e=Object(r.useState)(""),t=Object(se.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(se.a)(c,2),s=i[0],o=i[1],l=Object(u.c)((function(e){return e})).contacts,b=Object(u.b)(),j=Object(xe.a)(),d=Object(xe.a)(),p=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":a(r);break;case"number":o(r)}};return Object(q.jsxs)("form",{onSubmit:function(e){e.preventDefault();if(function(e){return l.items.map((function(e){return e.name})).includes(e)}(n))return alert("".concat(n," is already in contacts"));b(C({name:n,number:s})),a(""),o("")},className:ke.a.TaskEditor,children:[Object(q.jsx)("label",{id:j,className:ke.a.TaskEditor_label,children:Object(q.jsx)("input",{className:ke.a.TaskEditor_input,id:j,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432,\r \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432.\r \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer,\r Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,value:n,onChange:p})}),Object(q.jsx)("label",{id:d,className:ke.a.TaskEditor_label,children:Object(q.jsx)("input",{className:ke.a.TaskEditor_input,id:d,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,value:s,onChange:p})}),Object(q.jsx)("button",{className:ke.a.TaskEditor_button,type:"submit",children:"Add contact"})]})}var ye=n(39),_e=n.n(ye);function we(){var e=Object(u.c)(pe),t=Object(u.b)();return Object(q.jsxs)("div",{children:[Object(q.jsx)("h3",{children:"Find contacts by name"}),Object(q.jsx)("input",{className:_e.a.TaskEditor_input,type:"text",value:e,onChange:function(e){return t(O(e.target.value))}})]})}function Ce(){var e=Object(u.b)();Object(r.useEffect)((function(){e(w.fulfilled())}),[e]);var t=Object(u.c)(de);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h1",{children:"Phonebook"}),Object(q.jsx)(ge,{}),Object(q.jsx)("h2",{children:"Contacts"}),Object(q.jsx)(we,{}),Object(q.jsx)(me,{}),t&&Object(q.jsx)("h1",{children:"loading ..."})]})}function Ae(e){var t=e.isAuth,n=e.component;return Object(q.jsx)(q.Fragment,{children:t?Object(q.jsx)(n,{}):Object(q.jsx)(H.a,{to:"/login"})})}function Te(e){var t=e.isAuth,n=e.component;return Object(q.jsx)(q.Fragment,{children:t?Object(q.jsx)(H.a,{to:"/phonebook"}):Object(q.jsx)(n,{})})}var Ee=function(){var e=Object(u.b)(),t=Object(u.c)(J),n=Object(u.c)(K);return Object(r.useEffect)((function(){e(z())}),[e]),!n&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(ne,{}),Object(q.jsx)(ce,{children:Object(q.jsxs)(H.d,{children:[Object(q.jsx)(H.b,{path:"/",element:Object(q.jsx)(Te,{isAuth:t,component:ie})}),Object(q.jsx)(H.b,{path:"/phonebook",element:Object(q.jsx)(Ae,{isAuth:t,component:Ce})}),Object(q.jsx)(H.b,{path:"/register",element:Object(q.jsx)(Te,{isAuth:t,component:be})}),Object(q.jsx)(H.b,{path:"/login",element:Object(q.jsx)(Te,{isAuth:t,component:oe})})]})})]})};i.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(u.a,{store:M,children:Object(q.jsx)(o.a,{loading:"please wait",persistor:P,children:Object(q.jsx)(s.a,{children:Object(q.jsx)(Ee,{})})})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.a19a5347.chunk.js.map