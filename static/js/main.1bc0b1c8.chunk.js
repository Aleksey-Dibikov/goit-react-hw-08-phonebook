(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{16:function(e,t,n){e.exports={TaskEditor:"ContactsForm_TaskEditor__2VeED",TaskEditor_label:"ContactsForm_TaskEditor_label__17ZZj",TaskEditor_input:"ContactsForm_TaskEditor_input__vn7L0",TaskEditorinput:"ContactsForm_TaskEditorinput__1K7lu",TaskEditor_button:"ContactsForm_TaskEditor_button__Gs4c6"}},24:function(e,t,n){e.exports={TaskList:"ContactList_TaskList__1vssD",TaskList_item:"ContactList_TaskList_item__2eNkl",TaskList_button:"ContactList_TaskList_button__1TfR2"}},38:function(e,t,n){e.exports={containerApp:"Container_containerApp__2QKgb"}},39:function(e,t,n){e.exports={TaskEditor_input:"Filter_TaskEditor_input__1ids8"}},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),i=n.n(c),s=n(13),o=n(3),u=n(36),l=n(23),b=n(4),j=n(14),d=n(37),p=n.n(d),f=n(5),O=n(6),h=Object(b.b)("contact/filter"),m=n(9),x=n.n(m),v=n(15),k=n(12),g=n.n(k);g.a.defaults.baseURL="https://connections-api.herokuapp.com";var y,_,w=Object(b.c)("contact/fetchContacts",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,g.a.get("/contact");case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),C=Object(b.c)("contact/addContact",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,g.a.post("/contacts",t);case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(b.c)("contact/deleteContact",function(){var e=Object(v.a)(x.a.mark((function e(t,n){var a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,g.a.delete("/contacts/".concat(t));case 4:return r=e.sent,c=r.data.id,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(b.d)([{id:"id-1",name:"Rosie Simpson",number:"459-12-56"},{id:"id-2",name:"Hermione Kline",number:"443-89-12"},{id:"id-3",name:"Eden Clements",number:"645-17-79"},{id:"id-4",name:"Annie Copeland",number:"227-91-26"}],(y={},Object(f.a)(y,w.fulfilled,(function(e,t){return t.payload})),Object(f.a)(y,C.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(l.a)(e),[n])})),Object(f.a)(y,L.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),y)),E=Object(b.d)(!1,(_={},Object(f.a)(_,w.pending,(function(){return!0})),Object(f.a)(_,w.fulfilled,(function(){return!1})),Object(f.a)(_,w.rejected,(function(){return!1})),Object(f.a)(_,C.pending,(function(){return!0})),Object(f.a)(_,C.fulfilled,(function(){return!1})),Object(f.a)(_,C.rejected,(function(){return!1})),Object(f.a)(_,L.pending,(function(){return!0})),Object(f.a)(_,L.fulfilled,(function(){return!1})),Object(f.a)(_,L.rejected,(function(){return!1})),_)),A=Object(b.d)("",Object(f.a)({},h,(function(e,t){return t.payload}))),N=Object(b.d)(null,{}),S=Object(O.b)({items:T,filter:A,loading:E,error:N});g.a.defaults.baseURL="https://connections-api.herokuapp.com";var F,D=function(e){g.a.defaults.headers.common.Authorization="Bearer ".concat(e)},R=function(){g.a.defaults.headers.common.Authorization=""},B=Object(b.c)("auth/register",function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/users/signup",t);case 3:return n=e.sent,a=n.data,D(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),I=Object(b.c)("auth/login",function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/users/login",t);case 3:return n=e.sent,a=n.data,D(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),z=Object(b.c)("auth/logout",Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/users/logout");case 3:R(),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),W=Object(b.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(F={},Object(f.a)(F,B.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(f.a)(F,I.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(f.a)(F,z.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),F)}).reducer,Z={key:"auth",storage:p.a,whitelist:["token"]},M=Object(b.a)({reducer:{auth:Object(j.g)(Z,W),contacts:S},middleware:Object(l.a)(Object(b.f)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),devTools:!1}),P=Object(j.h)(M),V=(n(71),n(2)),H=n(38),J=n.n(H),K=n(0);function q(e){var t=e.children;return Object(K.jsx)("div",{className:J.a.containerApp,children:t})}function U(){return Object(K.jsx)("h1",{children:"Home page!!!"})}var G=n(7),Q={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function $(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(G.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(G.a)(i,2),u=s[0],l=s[1],b=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return c(a);case"password":return l(a);default:return}};return Object(K.jsxs)("div",{children:[Object(K.jsx)("h1",{children:"Login page"}),Object(K.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(I({email:r,password:u})),c(""),l("")},style:Q.form,autoComplete:"off",children:[Object(K.jsxs)("label",{style:Q.label,children:["Mail",Object(K.jsx)("input",{type:"email",name:"email",value:r,onChange:b})]}),Object(K.jsxs)("label",{style:Q.label,children:["Password",Object(K.jsx)("input",{type:"password",name:"password",value:u,onChange:b})]}),Object(K.jsx)("button",{type:"submit",children:"Enter"})]})]})}var X={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function Y(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(G.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(G.a)(i,2),u=s[0],l=s[1],b=Object(a.useState)(""),j=Object(G.a)(b,2),d=j[0],p=j[1],f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return c(a);case"email":return l(a);case"password":return p(a);default:return}};return Object(K.jsxs)("div",{children:[Object(K.jsx)("h1",{children:"Registration page"}),Object(K.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(B({name:r,email:u,password:d})),c(""),l(""),p("")},style:X.form,autoComplete:"off",children:[Object(K.jsxs)("label",{style:X.label,children:["Name",Object(K.jsx)("input",{type:"text",name:"name",value:r,onChange:f})]}),Object(K.jsxs)("label",{style:X.label,children:["Mail",Object(K.jsx)("input",{type:"email",name:"email",value:u,onChange:f})]}),Object(K.jsxs)("label",{style:X.label,children:["Password",Object(K.jsx)("input",{type:"password",name:"password",value:d,onChange:f})]}),Object(K.jsx)("button",{type:"submit",children:"Register now"})]})]})}var ee=n(22),te=function(e){return e.contacts.loading},ne=function(e){return e.contacts.filter},ae=Object(ee.a)([function(e){return e.contacts.items},ne],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),re=n(24),ce=n.n(re);function ie(){var e=Object(o.c)(ae),t=Object(o.b)();return Object(K.jsx)("ul",{className:ce.a.TaskList,children:e.map((function(e){var n=e.id,a=e.name,r=e.number;return Object(K.jsxs)("li",{className:ce.a.TaskList_item,children:[a," : ",r,Object(K.jsx)("button",{className:ce.a.TaskList_button,onClick:function(){return t(L.fulfilled(n))},children:"Delete"})]},n)}))})}var se=n(75),oe=n(16),ue=n.n(oe);function le(){var e=Object(a.useState)(""),t=Object(G.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(G.a)(c,2),s=i[0],u=i[1],l=Object(o.c)((function(e){return e})).contacts,b=Object(o.b)(),j=Object(se.a)(),d=Object(se.a)(),p=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"number":u(a)}};return Object(K.jsxs)("form",{onSubmit:function(e){e.preventDefault();if(function(e){return l.items.map((function(e){return e.name})).includes(e)}(n))return alert("".concat(n," is already in contacts"));b(C({name:n,number:s})),r(""),u("")},className:ue.a.TaskEditor,children:[Object(K.jsx)("label",{id:j,className:ue.a.TaskEditor_label,children:Object(K.jsx)("input",{className:ue.a.TaskEditor_input,id:j,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432,\r \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432.\r \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer,\r Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,value:n,onChange:p})}),Object(K.jsx)("label",{id:d,className:ue.a.TaskEditor_label,children:Object(K.jsx)("input",{className:ue.a.TaskEditor_input,id:d,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,value:s,onChange:p})}),Object(K.jsx)("button",{className:ue.a.TaskEditor_button,type:"submit",children:"Add contact"})]})}var be=n(39),je=n.n(be);function de(){var e=Object(o.c)(ne),t=Object(o.b)();return Object(K.jsxs)("div",{children:[Object(K.jsx)("h3",{children:"Find contacts by name"}),Object(K.jsx)("input",{className:je.a.TaskEditor_input,type:"text",value:e,onChange:function(e){return t(h(e.target.value))}})]})}function pe(){var e=Object(o.c)(te),t=Object(o.b)();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{children:"Phonebook"}),Object(K.jsx)(le,{}),Object(K.jsx)("h2",{children:"Contacts"}),Object(K.jsx)(de,{}),Object(K.jsx)(ie,{onFetchContacts:function(){return t(w.fulfilled())}}),e&&Object(K.jsx)("h1",{children:"loading ..."})]})}function fe(e){var t=e.isAuth,n=e.component;return Object(K.jsx)(K.Fragment,{children:t?Object(K.jsx)(V.a,{to:"/"}):Object(K.jsx)(n,{})})}var Oe={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5"}},he=function(){return Object(K.jsxs)("nav",{children:[Object(K.jsx)(s.b,{to:"/",style:Oe.link,activestyle:Oe.activeLink,children:"Home"}),Object(K.jsx)(s.b,{to:"/phonebook",style:Oe.link,activestyle:Oe.activeLink,children:"Phonebook"})]})},me=function(e){return e.auth.isLoggedIn},xe=function(e){return e.auth.user.name},ve={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function ke(){var e=Object(o.b)(),t=Object(o.c)(xe);return Object(K.jsxs)("div",{style:ve.container,children:[Object(K.jsxs)("span",{style:ve.name,children:["Welcome, ",t]}),Object(K.jsx)("button",{type:"button",onClick:function(){return e(z())},children:"Exit"})]})}var ge={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function ye(){return Object(K.jsxs)("div",{children:[Object(K.jsx)(s.b,{to:"/register",style:ge.link,activestyle:ge.activeLink,children:"Register"}),Object(K.jsx)(s.b,{to:"/login",style:ge.link,activestyle:ge.activeLink,children:"Login"})]})}var _e={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function we(){var e=Object(o.c)(me);return Object(K.jsxs)("header",{style:_e.header,children:[Object(K.jsx)(he,{}),e?Object(K.jsx)(ke,{}):Object(K.jsx)(ye,{})]})}var Ce=!1;var Le=function(){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(we,{}),Object(K.jsx)(q,{children:Object(K.jsxs)(V.d,{children:[Object(K.jsx)(V.b,{path:"/",element:Object(K.jsx)(fe,{isAuth:Ce,component:U})}),Object(K.jsx)(V.b,{path:"/register",element:Object(K.jsx)(fe,{isAuth:Ce,component:Y})}),Object(K.jsx)(V.b,{path:"/login",element:Object(K.jsx)(fe,{isAuth:Ce,component:$})}),Object(K.jsx)(V.b,{path:"/phonebook",element:Object(K.jsx)(fe,{isAuth:Ce,component:pe})})]})})]})};i.a.render(Object(K.jsx)(r.a.StrictMode,{children:Object(K.jsx)(o.a,{store:M,children:Object(K.jsx)(u.a,{loading:"please wait",persistor:P,children:Object(K.jsx)(s.a,{children:Object(K.jsx)(Le,{})})})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.1bc0b1c8.chunk.js.map